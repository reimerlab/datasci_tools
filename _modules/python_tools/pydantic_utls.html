<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>python_tools.pydantic_utls &mdash; python_tools 1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            python_tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">python_tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">python_tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">python_tools.pydantic_utls</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for python_tools.pydantic_utls</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>


<span class="sd">Purpose of module: a module that has:</span>
<span class="sd">1) Base class that a custom class can inherit from:</span>
<span class="sd">- will automatically run checks on the types (or convert data to write type) of data arguments are</span>
<span class="sd">- has pre-written functions like outputing dictionaries, jsons</span>

<span class="sd">2) Different ways to put constraints on data</span>

<span class="sd">Overall Purpose:</span>
<span class="sd">to more securily store data with checks</span>

<span class="sd">--- Base settings: </span>
<span class="sd">link: https://pavledjuric.medium.com/how-to-configure-the-settings-of-your-python-app-with-pydantic-d8191113dcb8</span>

<span class="sd">What problem is it solving: </span>
<span class="sd">1) how to store API keys and sensitive information in a class</span>
<span class="sd">without necessarily hard coding it</span>
<span class="sd">2) apply type hinting to check arguments and hard coded values</span>

<span class="sd">How does it do that? It will first try to extract these values from environment variables, and only if they are not found in the environment, it will read the hardcoded values</span>

<span class="sd">What happens: if something is defined as an environment variable, it will use that (</span>
<span class="sd">so don&#39;t have to hardcode it)</span>


<span class="sd">&#39;&#39;&#39;</span>

<div class="viewcode-block" id="example"><a class="viewcode-back" href="../../python_tools.html#python_tools.pydantic_utls.example">[docs]</a><span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
    <span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Example: will automatically convert id into the write data type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">username</span> <span class="p">:</span> <span class="nb">str</span>
        <span class="n">password</span> <span class="p">:</span> <span class="nb">str</span>
        <span class="n">confirm_password</span> <span class="p">:</span> <span class="nb">str</span>
        <span class="n">alias</span> <span class="o">=</span> <span class="s1">&#39;anonymous&#39;</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">friends</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    
    
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;wai foong&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Password123&#39;</span><span class="p">,</span> <span class="s1">&#39;confirm_password&#39;</span><span class="p">:</span> <span class="s1">&#39;Password123&#39;</span><span class="p">,</span> <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-08-03 10:30&#39;</span><span class="p">,</span> <span class="s1">&#39;friends&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;3&#39;</span><span class="p">]}</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    
    
    <span class="c1"># ---- Ex: BaseSettings ---</span>
    <span class="c1"># -- run this in bash --</span>
    <span class="c1">#export API_KEY=from_env_vars</span>
    <span class="c1">#export DB_URL=from_env_vars_also</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the value of API_KEY would actually be &#39;from_env_vars&#39;</span>
<span class="sd">    because it is overwritten with the .env file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PostgresDsn</span>
    <span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
        <span class="n">API_KEY</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;some_secret&#39;</span>
        <span class="n">DB_URL</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://username:passw&#39;</span>
            
            
    <span class="c1"># --- Ex: Using env variable to define class variables</span>
    <span class="k">class</span> <span class="nc">NeptuneSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the variables from the environment.</span>
<span class="sd">        Errors will be raised if the required variables are not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=...</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="s2">&quot;NEPTUNE&quot;</span><span class="p">)</span>
        <span class="n">OWNER</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;johschmidt42&quot;</span>  <span class="c1"># set your name here, e.g. johndoe22</span>
        <span class="n">PROJECT</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Heads&quot;</span>  <span class="c1"># set your project name here, e.g. Heads</span>
        <span class="n">EXPERIMENT</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;heads&quot;</span>  <span class="c1"># set your experiment name here, e.g. heads</span>
        <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
            <span class="c1"># this tells pydantic to read the variables from the .env file</span>
            <span class="n">env_file</span> <span class="o">=</span> <span class="s2">&quot;.env&quot;</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Brendan Celii.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>